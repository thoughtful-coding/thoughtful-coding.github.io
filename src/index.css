:root {
  font-family: system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;
  font-synthesis: none;
  text-rendering: optimizelegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  padding-left: 10%;
  padding-right: 10%;
  color-scheme: light dark;

  /* ===== LIGHT THEME COLORS (DEFAULT) ===== */

  /* Backgrounds */
  --bg-primary: #fff;
  --bg-secondary: #f9f9f9;
  --bg-tertiary: #fdfdfd;
  --bg-elevated: #fff;
  --bg-code: #f8f9fa;
  --bg-code-block: #2e3440;

  /* Text */
  --text-primary: #213547;
  --text-secondary: #444;
  --text-muted: #666;
  --text-disabled: #999;
  --text-on-primary: #fff;
  --text-code-block: #d8dee9;

  /* Borders */
  --border-primary: #e0e0e0;
  --border-secondary: #eee;
  --border-tertiary: #ddd;
  --border-focus: #4b8bbe;

  /* Primary Colors (Python blue) */
  --primary: #4b8bbe;
  --primary-dark: #306998;
  --primary-light: #5a9fd4;
  --primary-bg: #eef6ff;

  /* Interactive States */
  --link-color: #306998;
  --link-hover: #535bf2;
  --button-bg: #f9f9f9;
  --button-text: #213547;
  --button-hover-border: #646cff;

  /* Semantic Colors */
  --success: #28a745;
  --success-dark: #218838;
  --success-light: #d4edda;
  --success-text: #155724;
  --error: #dc3545;
  --error-dark: #bd2130;
  --error-light: #f8d7da;
  --error-text: #721c24;
  --error-border: #f5c6cb;
  --warning: #ffc107;
  --warning-dark: #e0a800;
  --warning-light: #fff3cd;
  --warning-text: #856404;
  --info: #007bff;
  --info-dark: #0056b3;
  --info-light: #cce5ff;
  --info-text: #004085;

  /* Shadows */
  --shadow-sm: 0 2px 4px rgb(0 0 0 / 10%);
  --shadow-md: 0 2px 10px rgb(0 0 0 / 5%);
  --shadow-lg: 0 5px 15px rgb(0 0 0 / 10%);
  --shadow-xl: 0 8px 20px rgb(0 0 0 / 12%);

  /* Glass/Frost Effects (semi-transparent white) */
  --glass-bg-subtle: rgb(255 255 255 / 10%);
  --glass-bg-light: rgb(255 255 255 / 15%);
  --glass-bg-medium: rgb(255 255 255 / 20%);
  --glass-bg-strong: rgb(255 255 255 / 30%);
  --glass-border-light: rgb(255 255 255 / 30%);
  --glass-border-medium: rgb(255 255 255 / 50%);
  --glass-border-strong: rgb(255 255 255 / 70%);
  --glass-text: rgb(255 255 255 / 60%);
  --glass-text-hover: rgb(255 255 255 / 90%);

  /* Overlays (semi-transparent black) */
  --overlay-subtle: rgb(0 0 0 / 5%);
  --overlay-light: rgb(0 0 0 / 10%);
  --overlay-medium: rgb(0 0 0 / 65%);
  --overlay-modal: rgb(0 0 0 / 70%);
  --overlay-dark: rgb(0 0 0 / 75%);

  /* Focus and Interaction */
  --focus-ring: rgb(75 139 190 / 20%);
  --focus-shadow: 0 0 0 2px var(--focus-ring);
  --focus-shadow-inset: inset 0 1px 2px rgb(0 0 0 / 7.5%);
  --focus-shadow-lg: 0 0 0 3px var(--focus-ring);

  /* Semi-transparent Feedback Colors */
  --success-bg-subtle: rgb(212 237 218 / 30%);
  --error-bg-subtle: rgb(248 215 218 / 20%);

  /* ===== LEGACY VARIABLE NAMES (for backwards compatibility) ===== */
  --background-color: var(--bg-primary);
  --text-color: var(--text-primary);
  --content-text-color: var(--text-secondary);
  --link-hover-color: var(--link-hover);
  --primary-color: var(--primary);
  --primary-dark-color: var(--primary-dark);
  --card-background-color: var(--bg-secondary);
  --card-border-color: var(--border-primary);
  --button-bg-color: var(--button-bg);
  --button-text-color: var(--button-text);
  --button-hover-border-color: var(--button-hover-border);
  --color-success: var(--success);
  --color-success-dark: var(--success-dark);
  --color-success-light: var(--success-light);
  --color-success-text: var(--success-text);
  --color-error: var(--error);
  --color-error-light: var(--error-light);
  --color-error-text: var(--error-text);
  --color-error-border: var(--error-border);
  --color-warning: var(--warning);
  --color-warning-light: var(--warning-light);
  --color-warning-text: var(--warning-text);
  --color-info: var(--info);
  --color-info-dark: var(--info-dark);

  /* ===== SPACING & SIZING (theme-independent) ===== */
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.5rem;
  --spacing-2xl: 2rem;
  --spacing-3xl: 3rem;

  /* Border radius */
  --radius-sm: 3px;
  --radius-md: 4px;
  --radius-lg: 6px;
  --radius-xl: 8px;

  /* Typography */
  --font-mono: "Menlo", "Consolas", "Courier New", monospace;

  /* Font size scale */
  --font-size-xs: 0.75rem;
  --font-size-sm: 0.875rem;
  --font-size-base: 1rem;
  --font-size-lg: 1.125rem;
  --font-size-xl: 1.25rem;
  --font-size-2xl: 1.5rem;
  --font-size-3xl: 1.875rem;
  --font-size-4xl: 2.25rem;

  /* Apply base colors */
  color: var(--text-color);
  background-color: var(--background-color);
}

/* ===== DARK THEME OVERRIDES ===== */

/* System preference: dark mode (unless user explicitly chose light) */
@media (prefers-color-scheme: dark) {
  :root:not(.theme-light) {
    color-scheme: dark;

    /* Backgrounds */
    --bg-primary: #1a1a1a;
    --bg-secondary: #242424;
    --bg-tertiary: #2a2a2a;
    --bg-elevated: #2d2d2d;
    --bg-code: #1e1e1e;
    --bg-code-block: #2e3440;

    /* Text - Much higher contrast for readability */
    --text-primary: #fff;
    --text-secondary: rgb(255 255 255 / 95%);
    --text-muted: rgb(255 255 255 / 80%);
    --text-disabled: rgb(255 255 255 / 45%);
    --text-on-primary: #fff;
    --text-code-block: #e5e9f0;

    /* Borders */
    --border-primary: #3a3a3a;
    --border-secondary: #333;
    --border-tertiary: #404040;
    --border-focus: #5a9fd4;

    /* Primary Colors (desaturated for dark mode) */
    --primary: #5a9fd4;
    --primary-dark: #4b8bbe;
    --primary-light: #6db3e8;
    --primary-bg: #1a2a3a;

    /* Interactive States */
    --link-color: #58a6ff;
    --link-hover: #79b8ff;
    --button-bg: #2a2a2a;
    --button-text: rgb(255 255 255 / 87%);
    --button-hover-border: #6db3e8;

    /* Semantic Colors (adjusted for dark backgrounds) */
    --success: #3fb950;
    --success-dark: #2ea043;
    --success-light: #1a3a2a;
    --success-text: #7ee787;
    --error: #f85149;
    --error-dark: #da3633;
    --error-light: #3a1a1a;
    --error-text: #ffa198;
    --error-border: #6e3030;
    --warning: #d29922;
    --warning-dark: #bb8613;
    --warning-light: #3a2f1a;
    --warning-text: #f0cd5e;
    --info: #58a6ff;
    --info-dark: #4184e4;
    --info-light: #1a2a3a;
    --info-text: #79b8ff;

    /* Shadows (stronger in dark mode) */
    --shadow-sm: 0 2px 4px rgb(0 0 0 / 30%);
    --shadow-md: 0 2px 10px rgb(0 0 0 / 40%);
    --shadow-lg: 0 5px 15px rgb(0 0 0 / 50%);
    --shadow-xl: 0 8px 20px rgb(0 0 0 / 60%);

    /* Glass/Frost Effects (more subtle in dark mode) */
    --glass-bg-subtle: rgb(255 255 255 / 5%);
    --glass-bg-light: rgb(255 255 255 / 8%);
    --glass-bg-medium: rgb(255 255 255 / 10%);
    --glass-bg-strong: rgb(255 255 255 / 15%);
    --glass-border-light: rgb(255 255 255 / 15%);
    --glass-border-medium: rgb(255 255 255 / 30%);
    --glass-border-strong: rgb(255 255 255 / 50%);
    --glass-text: rgb(255 255 255 / 70%);
    --glass-text-hover: rgb(255 255 255 / 95%);

    /* Overlays (stronger in dark mode) */
    --overlay-subtle: rgb(0 0 0 / 10%);
    --overlay-light: rgb(0 0 0 / 20%);
    --overlay-medium: rgb(0 0 0 / 75%);
    --overlay-modal: rgb(0 0 0 / 80%);
    --overlay-dark: rgb(0 0 0 / 85%);

    /* Focus and Interaction (adjusted for dark mode) */
    --focus-ring: rgb(90 159 212 / 25%);
    --focus-shadow: 0 0 0 2px var(--focus-ring);
    --focus-shadow-inset: inset 0 1px 2px rgb(0 0 0 / 20%);
    --focus-shadow-lg: 0 0 0 3px var(--focus-ring);

    /* Semi-transparent Feedback Colors (adjusted for dark mode) */
    --success-bg-subtle: rgb(63 185 80 / 15%);
    --error-bg-subtle: rgb(248 81 73 / 15%);

    /* Legacy variable overrides for dark mode */
    --background-color: var(--bg-primary);
    --text-color: var(--text-primary);
    --content-text-color: var(--text-secondary);
    --card-background-color: var(--bg-secondary);
    --card-border-color: var(--border-primary);
    --button-bg-color: var(--button-bg);
    --button-text-color: var(--button-text);
  }
}

/* Manual dark mode selection */
:root.theme-dark {
  color-scheme: dark;

  /* Backgrounds */
  --bg-primary: #1a1a1a;
  --bg-secondary: #242424;
  --bg-tertiary: #2a2a2a;
  --bg-elevated: #2d2d2d;
  --bg-code: #1e1e1e;
  --bg-code-block: #2e3440;

  /* Text - Much higher contrast for readability */
  --text-primary: #fff;
  --text-secondary: rgb(255 255 255 / 95%);
  --text-muted: rgb(255 255 255 / 80%);
  --text-disabled: rgb(255 255 255 / 45%);
  --text-on-primary: #fff;
  --text-code-block: #e5e9f0;

  /* Borders */
  --border-primary: #3a3a3a;
  --border-secondary: #333;
  --border-tertiary: #404040;
  --border-focus: #5a9fd4;

  /* Primary Colors (desaturated for dark mode) */
  --primary: #5a9fd4;
  --primary-dark: #4b8bbe;
  --primary-light: #6db3e8;
  --primary-bg: #1a2a3a;

  /* Interactive States */
  --link-color: #58a6ff;
  --link-hover: #79b8ff;
  --button-bg: #2a2a2a;
  --button-text: rgb(255 255 255 / 87%);
  --button-hover-border: #6db3e8;

  /* Semantic Colors (adjusted for dark backgrounds) */
  --success: #3fb950;
  --success-dark: #2ea043;
  --success-light: #1a3a2a;
  --success-text: #7ee787;
  --error: #f85149;
  --error-dark: #da3633;
  --error-light: #3a1a1a;
  --error-text: #ffa198;
  --error-border: #6e3030;
  --warning: #d29922;
  --warning-dark: #bb8613;
  --warning-light: #3a2f1a;
  --warning-text: #f0cd5e;
  --info: #58a6ff;
  --info-dark: #4184e4;
  --info-light: #1a2a3a;
  --info-text: #79b8ff;

  /* Shadows (stronger in dark mode) */
  --shadow-sm: 0 2px 4px rgb(0 0 0 / 30%);
  --shadow-md: 0 2px 10px rgb(0 0 0 / 40%);
  --shadow-lg: 0 5px 15px rgb(0 0 0 / 50%);
  --shadow-xl: 0 8px 20px rgb(0 0 0 / 60%);

  /* Glass/Frost Effects (more subtle in dark mode) */
  --glass-bg-subtle: rgb(255 255 255 / 5%);
  --glass-bg-light: rgb(255 255 255 / 8%);
  --glass-bg-medium: rgb(255 255 255 / 10%);
  --glass-bg-strong: rgb(255 255 255 / 15%);
  --glass-border-light: rgb(255 255 255 / 15%);
  --glass-border-medium: rgb(255 255 255 / 30%);
  --glass-border-strong: rgb(255 255 255 / 50%);
  --glass-text: rgb(255 255 255 / 70%);
  --glass-text-hover: rgb(255 255 255 / 95%);

  /* Overlays (stronger in dark mode) */
  --overlay-subtle: rgb(0 0 0 / 10%);
  --overlay-light: rgb(0 0 0 / 20%);
  --overlay-medium: rgb(0 0 0 / 75%);
  --overlay-modal: rgb(0 0 0 / 80%);
  --overlay-dark: rgb(0 0 0 / 85%);

  /* Focus and Interaction (adjusted for dark mode) */
  --focus-ring: rgb(90 159 212 / 25%);
  --focus-shadow: 0 0 0 2px var(--focus-ring);
  --focus-shadow-inset: inset 0 1px 2px rgb(0 0 0 / 20%);
  --focus-shadow-lg: 0 0 0 3px var(--focus-ring);

  /* Semi-transparent Feedback Colors (adjusted for dark mode) */
  --success-bg-subtle: rgb(63 185 80 / 15%);
  --error-bg-subtle: rgb(248 81 73 / 15%);

  /* Legacy variable overrides for dark mode */
  --background-color: var(--bg-primary);
  --text-color: var(--text-primary);
  --content-text-color: var(--text-secondary);
  --card-background-color: var(--bg-secondary);
  --card-border-color: var(--border-primary);
  --button-bg-color: var(--button-bg);
  --button-text-color: var(--button-text);
}

/* --- BASE ELEMENT STYLES USING VARIABLES --- */

a {
  font-weight: 500;
  color: var(--link-color);
  text-decoration: inherit;
}

a:hover {
  color: var(--link-hover-color);
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  width: 100%;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: var(--button-bg-color);
  color: var(--button-text-color);
  cursor: pointer;
  transition: border-color 0.25s;
}

button:hover {
  border-color: var(--button-hover-border-color);
}

button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}
